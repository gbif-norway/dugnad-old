$def with(key, project, charts)

<link rel='stylesheet' href='$config['base']/css/chartist.css'>
<script src='$config['base']/js/chartist.js'></script>

<section class=info>
  <section>
    <h1>$_(project['title'])</h1>
    <p>$:_(project['description'])
  
    <p id=start-transcribing>
      <a href='$prefix/project/$key'>$_('start-project')</a>
  </section>
</section>

<section class=charts>
  $for chart in charts:
    <article>
      <div id='chart-$chart['id']' class='ct-chart ct-perfect-fifth'></div>
      <p>$chart['description']
    </article>
</section>

<nav>
  <a href='$prefix/project/$key/stats'>Mer statistikk</a>
  Â·
  <a href='$prefix/project/$key/log'>Transkripsjonslogg</a>
</nav>

<script>
$for chart in charts:
  var data = {
    labels: $:json.dumps(chart.get('labels')),
    series: $:json.dumps(chart.get('series'))
  }
  $if chart['type'] == "pie":
    new Chartist.Pie('#chart-$chart['id']', data);
  $elif chart['type'] == "bar":
    new Chartist.Bar('#chart-$chart['id']', data);
  $elif chart['type'] == "area":
    new Chartist.Line('#chart-$chart['id']', data, {
      fullWidth: true, chartPadding: { right: 40 },
      low: 0, showArea: true,
      axisY: { showGrid: false, onlyInteger: true }
    });
  $elif chart['type'] == "line":
    new Chartist.Line('#chart-$chart['id']', data);

var data = {
  'labels': ['Anonym #1', 'Anonym #2', 'Anonym #3', "Anonym #4", "Anonym #5"],
  'series': [
    [ 100, 60, 30, 10, 5]
  ]
};
// onlyInteger: true
new Chartist.Bar("#test3", data, {
  axisX: { showGrid: false },
  axisY: { showGrid: false, onlyInteger: true }
});
</script>

